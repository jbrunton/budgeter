<% breadcrumb :project, @project %>

<p id="notice"><%= notice %></p>

<h3><%= @project.name %></h3>

<div class="row">
  <div class="col s4">
    <ul class="collection with-header">
      <li class="collection-header"><h4>Reports</h4></li>
      <li class="collection-item">
        <%= link_to 'Balance History', reports_balance_project_path(@project) %>
      </li>
      <li class="collection-item">
        <%= link_to 'Spend', reports_spend_project_path(@project) %>
      </li>
    </ul>
  </div>
  <div class="col s4">
    <ul class="collection with-header">
      <li class="collection-header"><h4>Accounts</h4></li>
      <li class="collection-item">
        <%= link_to 'View Accounts', project_accounts_path(@project) %>
      </li>
      <li class="collection-item">
        <%= link_to 'Backup and Restore', backup_project_path(@project) %>
      </li>
      <li class="collection-item">
        <%= link_to 'Train Classifier', train_project_path(@project) %>
      </li>
    </ul>
  </div>
  <div class="col s4">
    <p>
      <strong>Directory:</strong>
      <%= @project.directory %>
    </p>

    <script type="application/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawVerificationStateChart);
      function drawVerificationStateChart() {
        $.get('<%= verification_state_project_path(@project) %>', function(jsonData) {
          var data = new google.visualization.DataTable(jsonData);

          var options = {
            pieSliceText: 'label',
            slices: {
              0: { color: '#66BB6A', offset: 0.1 },
              1: { color: '#EF5350' }
            }
          };

          var chart = new google.visualization.PieChart(document.getElementById('verification_state_chart'));

          chart.draw(data, options);
        });
      }
    </script>
    <div id="verification_state_chart">

    </div>
  </div>
</div>

<%= link_to 'Edit', edit_project_path(@project) %> |
<%= link_to 'Back', projects_path %>
